Цей проект є FastAPI-сервером для тренування та розгортання моделі машинного навчання, яка прогнозує оптимальний тип зарядного пристрою для користувачів ZapApp.

Проект реалізує повноцінний MLOps-пайплайн:

    -API (FastAPI): Надає ендпоінти для тренування та прогнозів.

    -Тренування: Модель (LightGBM) тренується на основі історичних даних.

    -Прогноз (Inference): Модель робить прогнози в реальному часі.

    -Логування: Усі запити та прогнози автоматично логуються у базу даних SQLite.

--СТРУКТУРА ПРОЕКТУ--

root/
├── app/                  # Головний пакет Python
│   ├── endpoints/        # Логіка для ендпоінтів
│   │   ├── training.py   # --- Функції тренування
│   │   ├── inference.py  # --- Функції прогнозування
│   │   └── __init__.py   # --- (Обов'язковий)
│   ├── main.py           # --- Головний файл FastAPI (Сервер)
│   └── logs/             # Папка для логів
│
├── data/                 # Папка для даних
│   └── charge_database_alt.sqlite
│
├── models/               # Папка для збережених моделей
│   └── production_model.joblib
│
└── README.md

--ВСТАНОВЛЕННЯ ТА НАЛАШТУВАННЯ--

Встановіть необхідні бібліотеки:
    pip install fastapi "uvicorn[standard]" scikit-learn pandas lightgbm joblib
Налаштування Бази Даних
    Переконайтеся, що ваш файл charge_database_alt.sqlite лежить у папці data/

--ЯК ПІДНЯТИ СЕРВЕР--
Сервер запускається за допомогою uvicorn.
Відкрийте термінал у кореневій папці проекту (root/).
Виконайте команду:
    uvicorn app.main:app --reload
Після запуску сервер буде доступний за адресою http://127.0.0.1:8000
Інтерактивна документація API (Swagger UI) доступна за адресою http://127.0.0.1:8000/docs.

--ЯК ВИКЛИКАТИ /train-model І /inference--

Вся взаємодія з API найпростіше виконується через інтерактивну документацію (/docs).
=POST /train-model=
Що робить: 
    -Запускає повний процес тренування моделі.
    -Читає всі дані з таблиць ChargingSessions..., Users... та Vehicles....
    -Ділить їх на навчальну (90%) та тестову (10%) вибірки за часом.
    -Тренує модель LightGBM (з гіперпараметрами, знайденими в ЛР3).
    -Зберігає навчену модель у models/production_model.joblib.
    -Робить прогнози на 90% навчальних даних та логує їх у таблицю predictions з source="train".
    -Повертає JSON з F1-score на 10% тестових даних.
Як викликати:
    -Перейдіть на http://127.0.0.1:8000/docs.
    -Знайдіть POST /train-model.
    -Натисніть "Try it out", а потім "Execute".

=POST /predict=
Що робить: 
    -Робить прогноз для одного користувача в реальному часі.
    -Приймає JSON із вхідними даними.
    -Завантажує модель models/production_model.joblib (якщо вона ще не в кеші).
    -Логує вхідний JSON у таблицю inference_inputs.
    -Робить прогноз (наприклад, "DC Fast Charger").
    -Логує результат у таблицю predictions з source="inference".
    -Повертає прогноз користувачу.
Як викликати:
    -Перейдіть на http://127.0.0.1:8000/docs.
    -Знайдіть POST /predict.
    -Натисніть "Try it out".
    -Вставте дані у форматі JSON у тіло запиту (Request body).

--СТУРКТУРА БАЗИ ДАНИХ--

База даних data/charge_database_alt.sqlite містить декілька таблиць, з яких ключовими для API є:
inference_inputs: Зберігає кожний запит до /predict.
    -input_id (PK): Унікальний ID запиту.
    -request_timestamp: Час отримання запиту.
    -input_data_json: Повний JSON, надісланий користувачем.
predictions: Зберігає кожен результат прогнозування.
    -prediction_id (PK): Унікальний ID прогнозу.
    -input_id (FK): Пов'язує з inference_inputs. (Буде NULL, якщо source="train").
    -prediction_timestamp: Час, коли було зроблено прогноз.
    -source: Джерело прогнозу ("train" або "inference").
    -predicted_class: Результат, який повернула модель (напр., "Level 2").
    -actual_class: Справжній клас (заповнюється тільки для source="train").