2025-11-09 21:39:57,858 - main - INFO - Сервер запускається...
2025-11-09 21:39:57,858 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 21:39:57,858 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 21:39:57,858 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 21:39:57,858 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 21:41:42,203 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 21:41:42,204 - main - ERROR - Під час тренування сталася помилка: module 'endpoints.training' has no attribute 'run_training_pipeline'
Traceback (most recent call last):
  File "C:\Users\dacko\Desktop\ZapAppML\app\main.py", line 69, in trigger_training
    result = training.run_training_pipeline()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'endpoints.training' has no attribute 'run_training_pipeline'
2025-11-09 21:43:38,625 - main - INFO - Сервер запускається...
2025-11-09 21:43:38,625 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 21:43:38,625 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 21:43:38,625 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 21:43:38,625 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 21:44:42,994 - main - INFO - Сервер запускається...
2025-11-09 21:44:42,994 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 21:44:42,994 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 21:44:42,995 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 21:44:42,995 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 21:45:46,505 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 21:45:46,505 - endpoints.training - INFO - Запуск повного пайплайну тренування...
2025-11-09 21:45:46,505 - endpoints.training - INFO - Завантаження даних з БД...
2025-11-09 21:45:46,526 - endpoints.training - ERROR - Помилка завантаження даних: Execution failed on sql 'SELECT * FROM ChargingSessions_ScaledNoAnomaly': no such table: ChargingSessions_ScaledNoAnomaly
2025-11-09 21:45:46,527 - main - ERROR - Під час тренування сталася помилка: Помилка завантаження даних: Execution failed on sql 'SELECT * FROM ChargingSessions_ScaledNoAnomaly': no such table: ChargingSessions_ScaledNoAnomaly
Traceback (most recent call last):
  File "C:\Users\dacko\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\io\sql.py", line 2674, in execute
    cur.execute(sql, *args)
sqlite3.OperationalError: no such table: ChargingSessions_ScaledNoAnomaly

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 27, in load_data
    df_sessions = pd.read_sql_query("SELECT * FROM ChargingSessions_ScaledNoAnomaly", conn)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\io\sql.py", line 526, in read_sql_query
    return pandas_sql.read_query(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\io\sql.py", line 2738, in read_query
    cursor = self.execute(sql, params)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\io\sql.py", line 2686, in execute
    raise ex from exc
pandas.errors.DatabaseError: Execution failed on sql 'SELECT * FROM ChargingSessions_ScaledNoAnomaly': no such table: ChargingSessions_ScaledNoAnomaly

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dacko\Desktop\ZapAppML\app\main.py", line 69, in trigger_training
    result = training.run_training_pipeline()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 114, in run_training_pipeline
    all_data = load_data(DATABASE_FILE)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 33, in load_data
    raise Exception(f"Помилка завантаження даних: {e}")
Exception: Помилка завантаження даних: Execution failed on sql 'SELECT * FROM ChargingSessions_ScaledNoAnomaly': no such table: ChargingSessions_ScaledNoAnomaly
2025-11-09 21:56:10,349 - main - INFO - Сервер запускається...
2025-11-09 21:56:10,350 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 21:56:10,350 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 21:56:10,350 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 21:56:10,350 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 21:56:20,000 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 21:56:20,001 - endpoints.training - INFO - Запуск повного пайплайну тренування...
2025-11-09 21:56:20,001 - endpoints.training - INFO - Завантаження даних з БД...
2025-11-09 21:56:20,002 - endpoints.training - ERROR - Помилка завантаження даних: unable to open database file
2025-11-09 21:56:20,002 - main - ERROR - Під час тренування сталася помилка: Помилка завантаження даних: unable to open database file
Traceback (most recent call last):
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 30, in load_data
    conn = sqlite3.connect(db_file)
           ^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: unable to open database file

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\dacko\Desktop\ZapAppML\app\main.py", line 69, in trigger_training
    result = training.run_training_pipeline()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 118, in run_training_pipeline
    all_data = load_data(DATABASE_FILE)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dacko\Desktop\ZapAppML\app\endpoints\training.py", line 37, in load_data
    raise Exception(f"Помилка завантаження даних: {e}")
Exception: Помилка завантаження даних: unable to open database file
2025-11-09 22:02:34,347 - main - INFO - Сервер запускається...
2025-11-09 22:02:34,347 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 22:02:34,347 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 22:02:34,347 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 22:02:34,347 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 22:06:34,442 - main - INFO - Сервер запускається...
2025-11-09 22:06:34,442 - endpoints.inference - INFO - Завантаження моделі з models\production_model.joblib...
2025-11-09 22:06:34,442 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: models\production_model.joblib
2025-11-09 22:06:34,442 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 22:06:34,443 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 22:07:00,885 - main - INFO - Сервер запускається...
2025-11-09 22:07:00,886 - endpoints.inference - INFO - Завантаження моделі з C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:07:00,886 - endpoints.inference - ERROR - Файл моделі не знайдено за шляхом: C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib
2025-11-09 22:07:00,886 - main - WARNING - Файл моделі 'production_model.joblib' не знайдено.
2025-11-09 22:07:00,886 - main - WARNING - Запустіть /train-model, щоб створити її.
2025-11-09 22:07:11,259 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 22:07:11,260 - endpoints.training - INFO - Запуск повного пайплайну тренування...
2025-11-09 22:07:11,261 - endpoints.training - INFO - Завантаження даних з БД...
2025-11-09 22:07:11,310 - endpoints.training - INFO - Підготовка ознак (X) та цілі (y)...
2025-11-09 22:07:11,314 - endpoints.training - INFO - Дані розділено: 1188 train, 132 new_input (test).
2025-11-09 22:07:11,314 - endpoints.training - INFO - Тренування моделі LightGBM...
2025-11-09 22:07:11,716 - endpoints.training - INFO - Збереження моделі у C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:07:11,770 - endpoints.training - INFO - Логування 1188 прогнозів у БД з джерелом 'train'...
2025-11-09 22:07:11,803 - endpoints.training - INFO - Фінальна F1-score на new_input (test) даних: 0.3183
2025-11-09 22:07:11,805 - endpoints.inference - INFO - Завантаження моделі з C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:07:11,839 - endpoints.inference - INFO - Модель успішно завантажено.
2025-11-09 22:11:44,256 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 22:11:44,257 - endpoints.training - INFO - Запуск повного пайплайну тренування...
2025-11-09 22:11:44,257 - endpoints.training - INFO - Завантаження даних з БД...
2025-11-09 22:11:44,276 - endpoints.training - INFO - Підготовка ознак (X) та цілі (y)...
2025-11-09 22:11:44,281 - endpoints.training - INFO - Дані розділено: 1188 train, 132 new_input (test).
2025-11-09 22:11:44,281 - endpoints.training - INFO - Тренування моделі LightGBM...
2025-11-09 22:11:44,752 - endpoints.training - INFO - Збереження моделі у C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:11:44,815 - endpoints.training - INFO - Логування 1188 прогнозів у БД з джерелом 'train'...
2025-11-09 22:11:44,845 - endpoints.training - INFO - Фінальна F1-score на new_input (test) даних: 0.3183
2025-11-09 22:21:20,097 - main - INFO - Сервер запускається...
2025-11-09 22:21:20,097 - endpoints.inference - INFO - Завантаження моделі з C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:21:20,123 - endpoints.inference - INFO - Модель успішно завантажено.
2025-11-09 22:21:20,124 - main - INFO - Модель успішно завантажена в кеш.
2025-11-09 22:22:05,709 - main - INFO - Сервер запускається...
2025-11-09 22:22:05,710 - endpoints.inference - INFO - Завантаження моделі з C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:22:05,723 - endpoints.inference - INFO - Модель успішно завантажено.
2025-11-09 22:22:05,724 - main - INFO - Модель успішно завантажена в кеш.
2025-11-09 22:22:18,952 - main - INFO - Отримано POST-запит на /train-model...
2025-11-09 22:22:18,953 - endpoints.training - INFO - Запуск повного пайплайну тренування...
2025-11-09 22:22:18,953 - endpoints.training - INFO - Завантаження даних з БД...
2025-11-09 22:22:18,975 - endpoints.training - INFO - Підготовка ознак (X) та цілі (y)...
2025-11-09 22:22:18,979 - endpoints.training - INFO - Дані розділено: 1188 train, 132 new_input (test).
2025-11-09 22:22:18,980 - endpoints.training - INFO - Тренування моделі LightGBM...
2025-11-09 22:22:19,304 - endpoints.training - INFO - Збереження моделі у C:\Users\dacko\Desktop\ZapAppML\models\production_model.joblib...
2025-11-09 22:22:19,354 - endpoints.training - INFO - Логування 1188 прогнозів у БД з джерелом 'train'...
2025-11-09 22:22:19,368 - endpoints.training - INFO - Фінальна F1-score на new_input (test) даних: 0.3183
2025-11-09 22:26:36,757 - main - INFO - Отримано POST-запит на /predict...
2025-11-09 22:26:36,757 - endpoints.inference - INFO - Логування вхідних даних у 'inference_inputs'...
2025-11-09 22:26:36,767 - endpoints.inference - INFO - Вхідні дані збережено, input_id: 1
2025-11-09 22:26:36,771 - endpoints.inference - INFO - Логування прогнозу для input_id 1...
2025-11-09 22:26:36,776 - endpoints.inference - INFO - Прогноз успішно залоговано.
